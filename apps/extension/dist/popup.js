console.log("Popup initialized");const l="workflow_recorder_events",c=document.getElementById("eventsContainer"),m=document.getElementById("emptyState"),E=document.getElementById("eventCount"),v=document.getElementById("refreshBtn"),g=document.getElementById("clearBtn");function u(t){return new Date(t).toLocaleString()}async function s(){try{console.log("Loading events from storage...");const n=(await chrome.storage.local.get(l))[l]||[];console.log(`Loaded ${n.length} events`),E.textContent=`(${n.length})`,c.innerHTML="",n.length===0?c.appendChild(m):(n.sort((o,e)=>e.ts-o.ts),n.forEach(o=>{var i;const e=document.createElement("div");e.className="event-item";const r=document.createElement("div");r.className="event-time",r.textContent=u(o.ts);const d=document.createElement("div");d.textContent=o.activity;const a=document.createElement("div");a.textContent=((i=o.attributes)==null?void 0:i.url)||"No URL",a.style.fontSize="12px",e.appendChild(r),e.appendChild(d),e.appendChild(a),c.appendChild(e)}))}catch(t){console.error("Error loading events:",t),c.innerHTML="<p>Error loading events. Check console for details.</p>"}}async function p(){try{console.log("Clearing all events..."),await chrome.storage.local.set({[l]:[]}),s()}catch(t){console.error("Error clearing events:",t)}}v.addEventListener("click",s);g.addEventListener("click",p);s();
