console.log("Content script ready");const o=`session_${Date.now()}_${Math.random().toString(36).substring(2,9)}`;function a(t){if(t.id)return`#${t.id}`;if(t.getAttribute("data-testid"))return`[data-testid="${t.getAttribute("data-testid")}"]`;if(t.className&&typeof t.className=="string"&&t.className.trim()!==""){const r=t.className.split(" ").filter(s=>s.trim()!=="");if(r.length>0)return`${t.tagName.toLowerCase()}.${r.join(".")}`}let i=0,e=t;for(;e.previousElementSibling;)e=e.previousElementSibling,i++;return`${t.tagName.toLowerCase()}:nth-child(${i+1})`}function n(t){var r;if(t.button!==0||t.ctrlKey||t.altKey||t.shiftKey||t.metaKey)return;const i=t.target;if(!i)return;const e={caseId:o,activity:`click ${a(i)}`,ts:Date.now(),attributes:{url:window.location.href,title:document.title,visible_text:((r=i.textContent)==null?void 0:r.trim().substring(0,100))||"",tag:i.tagName.toLowerCase()}};console.log("Captured click event:",e);try{chrome.runtime.sendMessage(e)}catch(s){console.error("Failed to send event to service worker:",s)}}document.addEventListener("click",n,!0);
